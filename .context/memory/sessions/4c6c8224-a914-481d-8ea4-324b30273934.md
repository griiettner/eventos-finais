---
id: "4c6c8224-a914-481d-8ea4-324b30273934"
title: "Eventos Finais - Recent Fixes & Known Issues"
type: "session"
tags: ["eventos-finais","troubleshooting","firebase","docker","bugs-fixed"]
created: "2026-01-06T03:22:38.282Z"
updated: "2026-01-06T03:22:38.282Z"
related: ["6c570618-88b2-4cc6-a625-b90bfb39ef99"]
importance: 0.9
---

# Eventos Finais - Recent Fixes & Known Issues

# Recent Issues Fixed (Jan 2026)

## Firebase Migration Issues
1. **Missing Firestore Index**: Created composite index for chapterPages (chapterId + pageNumber)
2. **Duplicate Pages**: Fixed delete endpoint - added DELETE /api/pages/:pageId
3. **Field Name Mismatch**: Backend uses camelCase (pageNumber), frontend expects snake_case (page_number) - fixed mapping in AdminService.getChapterPages()
4. **SQLite References**: Removed all SQLite/DBService imports from codebase
5. **Firebase Credentials**: Switched from JSON file to environment variables

## Docker Configuration
1. Removed obsolete 'version' field from all docker-compose files
2. Removed firebase-service-account.json volume mount
3. Updated prod configs to match dev structure (frontend + api services)
4. Firebase Admin SDK now uses env vars: FIREBASE_PROJECT_ID, FIREBASE_CLIENT_EMAIL, FIREBASE_PRIVATE_KEY

## Authentication Flow
1. User authenticates via Kinde OAuth (Google/Facebook/Apple)
2. Frontend gets JWT token from Kinde
3. Token passed to backend API in Authorization header
4. Backend validates JWT using Kinde's JWKS endpoint
5. Admin access checked via token claims (roles array)

## Pending Work
- Dashboard.tsx needs refactoring to use FirebaseService instead of removed DBService
- ChapterDetail.tsx needs refactoring to use FirebaseService instead of removed DBService
- These pages will error until refactored